{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cinema Reservation</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <script src="{% static 'js/scripts.js' %}" defer></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <style>
        /* Custom translation dropdown styles */
        .translate-wrapper {
            margin-left: 20px;
        }
        #custom-translate {
            padding: 5px 10px;
            font-size: 14px;
            border-radius: 5px;
            border: 1px solid #ccc;
            background-color: #fff;
            cursor: pointer;
        }
        #custom-translate:focus {
            outline: none;
            border-color: #555;
        }
    </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar">
    <div class="logo">
        <a href="{% url 'home' %}">
            <img src="{% static 'images/logo3.png' %}" alt="Cinema Logo" style="height:70px;">
        </a>
    </div>
    <ul class="nav-links">
        <li><a href="{% url 'home' %}">Home</a></li>
        <li><a href="{% url 'cinema' %}">Events/Cinema</a></li>
        <li><a href="{% url 'streaming:streaming_home' %}">Streaming</a></li>
        <li><a href="{% url 'about' %}">About</a></li>
        <li><a href="{% url 'contact' %}">Contact</a></li>

        {% if user.is_authenticated %}
            <li>
                <a href="{% url 'streaming:user_profile' %}" class="profile-btn">
                    {% if profile and profile.profile_picture %}
                        <img src="{{ profile.profile_picture.url }}" alt="{{ user.username }}" class="profile-img">
                    {% else %}
                        <i class="fas fa-user-circle"></i>
                    {% endif %}
                    {{ user.username }}
                </a>
            </li>
            <li><a href="{% url 'streaming:logout' %}" class="logout-btn">Logout</a></li>
        {% else %}
            <li><a href="{% url 'streaming:login' %}" class="login-btn">Login</a></li>
            <li><a href="{% url 'streaming:signup' %}" class="signup-btn">Sign Up</a></li>
        {% endif %}
    </ul>

    <!-- Working Translation Dropdown -->
 

</nav>

<!-- Hero Board -->
<section class="hero">
    <img src="{% static 'images/h.jpg' %}" alt="Cinema Hero">
    <div class="hero-content">
        <h1>Experience Movies Like Never Before</h1>
        <p>Book tickets, stream online, and enjoy the latest releases.</p>
        <a href="{% url 'cinema' %}" class="btn">View More</a>
    </div>
</section>

<!-- Featured Cinema Movies Carousel -->
<section class="carousel-section">
    <h2>Featured Events/Cinema</h2>
    <div class="carousel-wrapper">
        <button class="carousel-arrow prev">‹</button>
        <div class="carousel-container">
            {% for movie in featured_movies|slice:":10" %}
                <div class="carousel-item">
                    {% if movie.poster %}
                        <img src="{{ movie.poster.url }}" alt="{{ movie.title }}">
                    {% else %}
                        <img src="{% static 'img/default_poster.jpg' %}" alt="{{ movie.title }}">
                    {% endif %}
                    <h3 class="notranslate">{{ movie.title }}</h3>
                    <a href="{% url 'seat_selection' movie.id %}" class="btn-small">Book Now</a>
                </div>
            {% endfor %}
        </div>
        <button class="carousel-arrow next">›</button>
    </div>
    {% if featured_movies|length > 10 %}
        <div class="more-link">
            <a href="{% url 'cinema' %}">More ➝</a>
        </div>
    {% endif %}
</section>

<!-- Featured Streaming Content Carousel -->
<section class="carousel-section">
    <h2>Featured Streaming Content</h2>
    <div class="carousel-wrapper">
        <button class="carousel-arrow prev">‹</button>
        <div class="carousel-container">
            {% for content in featured_streaming|slice:":10" %}
                <div class="carousel-item">
                    {% if content.thumbnail %}
                        <img src="{{ content.thumbnail.url }}" alt="{{ content.title }}">
                    {% else %}
                        <img src="{% static 'img/default_poster.jpg' %}" alt="{{ content.title }}">
                    {% endif %}
                    <h3 class="notranslate">{{ content.title }}</h3>
                    <a href="{% url 'streaming:watch_video' content.id %}" class="btn-small">Watch Now</a>
                </div>
            {% endfor %}
        </div>
        <button class="carousel-arrow next">›</button>
    </div>
    {% if featured_streaming|length > 10 %}
        <div class="more-link">
            <a href="{% url 'streaming:streaming_home' %}">More ➝</a>
        </div>
    {% endif %}
</section>

<!-- Subscription Plans -->
<section class="plans">
    <h2>Choose Your Plan</h2>
    <div class="plan-box">
        <h3>Monthly</h3>
        <p>$500 / month</p>
        <a href="{% url 'streaming:signup' %}" class="btn">Subscribe</a>
    </div>
    <div class="plan-box">
        <h3>Annual</h3>
        <p>$5000 / year</p>
        <a href="{% url 'streaming:signup' %}" class="btn">Subscribe</a>
    </div>
</section>

<!-- Footer -->
<footer class="site-footer">
    <div class="footer-content">
        <div class="social-icons">
            <a href="https://facebook.com" target="_blank" aria-label="Facebook">
                <i class="fab fa-facebook-f"></i>
            </a>
            <a href="https://twitter.com" target="_blank" aria-label="Twitter">
                <i class="fab fa-twitter"></i>
            </a>
            <a href="https://instagram.com" target="_blank" aria-label="Instagram">
                <i class="fab fa-instagram"></i>
            </a>
            <a href="https://linkedin.com" target="_blank" aria-label="LinkedIn">
                <i class="fab fa-linkedin-in"></i>
            </a>
        </div>
    </div>
    <p>&copy; Qine Entertainment 2025. All rights reserved.</p>
</footer>

<!-- Translation Dropdown Script -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const select = document.getElementById('custom-translate');

    select.addEventListener('change', function() {
        const lang = this.value;
        if (lang === 'en') {
            // Reset translation
            window.location.href = window.location.pathname;
        } else {
            // Redirect using Google Translate
            const base = 'https://translate.google.com/translate';
            const url = `${base}?hl=${lang}&sl=en&tl=${lang}&u=${encodeURIComponent(window.location.href)}`;
            window.location.href = url;
        }
    });
});
</script>

<!-- Carousel Logic -->
<script>
document.querySelectorAll(".carousel-section").forEach(section => {
    const container = section.querySelector(".carousel-container");
    const prev = section.querySelector(".carousel-arrow.prev");
    const next = section.querySelector(".carousel-arrow.next");
    let scrollAmount = container.clientWidth * 0.8;

    function updateArrows() {
        prev.style.display = container.scrollLeft > 0 ? "block" : "none";
        next.style.display = (container.scrollLeft + container.clientWidth < container.scrollWidth) ? "block" : "none";
    }

    prev.addEventListener("click", () => {
        container.scrollBy({ left: -scrollAmount, behavior: "smooth" });
    });
    next.addEventListener("click", () => {
        container.scrollBy({ left: scrollAmount, behavior: "smooth" });
    });

    container.addEventListener("scroll", updateArrows);
    window.addEventListener("resize", updateArrows);
    updateArrows();
});
</script>

</body>
</html>
